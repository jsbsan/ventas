CREATE TABLE Empleado (id INTEGER PRIMARY KEY, dni TEXT, nombre TEXT, telefono TEXT, correo TEXT, domicilio TEXT, comentario TEXT)
CREATE TABLE cliente (id INTEGER PRIMARY KEY, dni TEXT, nombre TEXT, telefono TEXT, correo TEXT, domicilio TEXT, comentario TEXT)
CREATE TABLE cupon (id INTEGER PRIMARY KEY, codigo TEXT, nombre TEXT, descripcion TEXT, precio NUMERIC, comentario TEXT)
CREATE TABLE servicio (id INTEGER PRIMARY KEY, nombre TEXT, precio NUMERIC, comentario TEXT)
CREATE TABLE linearecibo (id INTEGER PRIMARY KEY, idproducto NUMERIC, idlinearecibo TEXT, precio NUMERIC, cantidad NUMERIC, descuento NUMERIC, total NUMERIC, tabla NUMERIC, iva NUMERIC)
CREATE TABLE recibo (id INTEGER PRIMARY KEY, idempleado NUMERIC, idcliente NUMERIC, fecha DATETIME, idlinearecibo TEXT, importe NUMERIC)
CREATE TABLE "lineaAlmacen" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "idProducto" INTEGER, "cantidad" FLOAT, "tipo" TEXT, "fecha"  DATETIME)
CREATE TABLE sqlite_sequence(name,seq)
CREATE TABLE notas ("id" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL , "idcliente" INTEGER, "fecha" DATETIME, "Comentario" TEXT)
CREATE TABLE producto (id INTEGER PRIMARY KEY, codigo TEXT, imagen TEXT, nombre TEXT, ubicacion TEXT, precio NUMERIC, comentario TEXT)
CREATE TABLE "imagenes" ("idimagen" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , "imagen" TEXT, "rutaimagen" TEXT)

CREATE VIEW "VistaAlbaranesAlmacen" AS select lineaAlmacen.id,fecha,idProducto,codigo,nombre,cantidad,tipo from lineaAlmacen,producto where lineaAlmacen.idproducto=producto.id
CREATE VIEW "sumaEntrada" AS  select producto.codigo,producto.nombre,precio,lineaAlmacen.idproducto,SUM(lineaAlmacen.cantidad) AS "suma_ENTRADA" from producto,lineaAlmacen where producto.id=lineaAlmacen.idproducto AND lineaAlmacen.tipo="ENTRADA" group by producto.id
CREATE VIEW "sumaRobo" AS  select producto.codigo,producto.nombre,lineaAlmacen.idproducto,SUM(lineaAlmacen.cantidad) AS "suma_ROBO" from producto, lineaAlmacen where producto.id=lineaAlmacen.idproducto AND lineaAlmacen.tipo="ROBO" GROUP by producto.id
CREATE VIEW "sumaRotura" AS  select producto.codigo,producto.nombre,lineaAlmacen.idproducto,SUM(lineaAlmacen.cantidad) AS "suma_ROTURA" from producto,lineaAlmacen where producto.id=lineaAlmacen.idproducto AND lineaAlmacen.tipo="ROTURA" GROUP by producto.id
CREATE VIEW "sumaSalida" AS  select producto.codigo,producto.nombre,linearecibo.idproducto,SUM(linearecibo.cantidad) AS "suma_VENTA" from producto,linearecibo where producto.id=linearecibo.idproducto And linearecibo.tabla=2 GROUP by producto.id
CREATE VIEW "INVENTARIO" AS  select  sumaEntrada.codigo,
sumaEntrada.nombre,sumaEntrada.idproducto,sumaEntrada.suma_Entrada as "ENTRADA",sumaSalida.suma_Venta as "VENTA",sumaRotura.suma_Rotura as "ROTURA",sumaRobo.suma_Robo as "ROBO",sumaEntrada.suma_Entrada-sumaSalida.suma_Venta-sumaRotura.suma_Rotura-sumaRobo.suma_Robo as "EXISTENCIA_ALMACEN"from sumaEntrada,sumaSalida,sumaRotura,sumaRobo where sumaEntrada.idproducto=sumaSalida.idproducto and sumaEntrada.idproducto=sumaRotura.idproducto and sumaEntrada.idproducto=sumaRobo.idproducto
CREATE VIEW "INVENTARIOVALORADO" AS  select sumaEntrada.codigo,sumaEntrada.nombre,sumaEntrada.idproducto,sumaEntrada.precio,sumaEntrada.suma_Entrada as "ENTRADA",sumaEntrada.precio*sumaEntrada.suma_Entrada AS "COSTE_ENTRADA",sumaSalida.suma_Venta as "VENTA",sumaEntrada.precio*sumaSalida.suma_Venta AS "COSTE_VENTA",sumaRotura.suma_Rotura as "ROTURA",sumaEntrada.precio*sumaRotura.suma_Rotura AS "COSTE_ROTURA",sumaRobo.suma_Robo as "ROBO",sumaEntrada.precio*sumaRobo.suma_Robo AS "COSTE_ROBO",sumaEntrada.suma_Entrada-sumaSalida.suma_Venta-sumaRotura.suma_Rotura-sumaRobo.suma_Robo as "EXISTENCIA_ALMACEN",sumaEntrada.precio*(sumaEntrada.suma_Entrada-sumaSalida.suma_Venta-sumaRotura.suma_Rotura-sumaRobo.suma_Robo) AS "COSTE_ALMACEN" from sumaEntrada,sumaSalida,sumaRotura,sumaRobo where sumaEntrada.idproducto=sumaSalida.idproducto and sumaEntrada.idproducto=sumaRotura.idproducto and sumaEntrada.idproducto=sumaRobo.idproducto
CREATE VIEW "total1" AS select l.id,idproducto,l.idlinearecibo,precio,cantidad,descuento,total,iva,idempleado,idcliente,fecha,importe from linearecibo l join recibo r where l.idlinearecibo=r.idlinearecibo
CREATE VIEW "total2" AS select * from total1 join producto where total1.idproducto=producto.id
CREATE VIEW "tabla2" AS  select * from total1 join producto where total1.idproducto=producto.id
CREATE VIEW "total3" AS       select 
total2.fecha,
total2.codigo,
total2.nombre,
total2.cantidad,
total2.precio,
total2.descuento,
total2.iva,
total2.idcliente,
empleado.nombre as empleado
from total2  join Empleado   where empleado.id=total2.idempleado
CREATE VIEW "total" AS        select 
total3.fecha,
total3.codigo,
total3.nombre,
total3.cantidad,
total3.precio,
total3.descuento,
total3.iva,
cliente.nombre as cliente,
empleado
from total3  join cliente  where cliente.id=total3.idcliente
